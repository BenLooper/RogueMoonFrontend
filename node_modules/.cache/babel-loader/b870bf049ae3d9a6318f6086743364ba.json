{"ast":null,"code":"export const initialState = {\n  //login\n  usernameInput: '',\n  passwordInput: '',\n  user: {},\n  ownedCards: [],\n  games: [],\n  //gameboard\n  gameOn: false,\n  drawHands: false,\n  gameCards: [],\n  enemyGameCards: [],\n  hand: [],\n  enemyHand: [],\n  userDiscard: [],\n  enemyDiscard: [],\n  enemyField: {\n    space: [],\n    ground: [],\n    foot: [],\n    other: []\n  },\n  userField: {\n    space: [],\n    ground: [],\n    foot: [],\n    other: []\n  },\n  env: [],\n  //scores \n  userScore: 0,\n  enemyScore: 0,\n  //passing\n  userTurn: true,\n  userPass: false,\n  enemyPass: false,\n  //reactors \n  userReactors: 2,\n  enemyReactors: 2,\n  userVictory: null\n};\n\nconst rowScore = array => {\n  let score = 0;\n\n  for (let i = 0; i < array.length; i++) {\n    score += array[i].strength;\n  }\n\n  return score;\n};\n\nconst newTotalScore = field => {\n  //we iterate through the field values (rows), and get the total of each rowScore\n  let total = Object.values(field).reduce((total, row) => total + rowScore(row), 0);\n  return total;\n};\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case 'CHANGE_USERNAME_INPUT':\n      return { ...state,\n        usernameInput: action.value\n      };\n      break;\n\n    case 'CHANGE_PASSWORD_INPUT':\n      return { ...state,\n        passwordInput: action.value\n      };\n      break;\n\n    case 'SET_USER':\n      return { ...state,\n        user: action.user,\n        ownedCards: action.ownedCards,\n        games: action.games,\n        gameOn: false\n      };\n      break;\n\n    case 'SET_GAME_CARDS':\n      //TODO -> Gets sent a list of chosen cards to set as gameCards from the selection screen    \n      return { ...state,\n        gameCards: action.gameCards,\n        enemyGameCards: action.enemyGameCards,\n        drawHands: true\n      };\n      break;\n\n    case 'SET_HANDS':\n      //Separate from game cards because hand is drawn in the battlefield, not the selection screen\n      let newHand = state.gameCards.slice(0, 10);\n      let newEnemyHand = state.enemyGameCards.slice(0, 10);\n      let newGameCards = state.gameCards.filter(card => !newHand.includes(card));\n      let newEnemyGameCards = state.enemyGameCards.filter(card => !newEnemyHand.includes(card));\n      return { ...state,\n        gameCards: newGameCards,\n        enemyGameCards: newEnemyGameCards,\n        hand: newHand,\n        enemyHand: newEnemyHand,\n        gameOn: true,\n        drawHands: false\n      };\n      break;\n\n    case 'PLAY_CARD':\n      //Possible change --> send over something to indicate whether it's the enemy or user \n      let role = action.role; //Remove the card from hand\n\n      let updatedUserHand = state.hand.filter(card => card.id !== action.card.id); //Update the row, then update the field with that updated row \n\n      let updatedUserRow = [...state.userField[role], action.card];\n      let updatedUserField = { ...state.userField,\n        [role]: updatedUserRow\n      }; //Find the new total, including the added card\n\n      let newUserTotal = newTotalScore(updatedUserField);\n      return { ...state,\n        userField: updatedUserField,\n        hand: updatedUserHand,\n        userScore: newUserTotal\n      };\n      break;\n\n    case 'PLAY_ENV':\n      //check to see if env already has that condition\n      let conditions = state.env.map(card => card.ability);\n\n      if (conditions.includes(action.card.ability)) {\n        return { ...state,\n          userDiscard: [...state.userDiscard, action.card],\n          hand: state.hand.filter(card => card.id !== action.card.id)\n        };\n      } else {\n        return { ...state,\n          env: [...state.env, action.card],\n          hand: state.hand.filter(card => card.id !== action.card.id)\n        };\n      }\n\n    case 'ENEMY_PLAY':\n      let chosenCard = state.enemyHand.slice(0, 1)[0];\n\n      if (chosenCard.role === 'env') {\n        let conditions = state.env.map(card => card.ability);\n\n        if (conditions.includes(chosenCard.ability)) {\n          return { ...state,\n            enemyDiscard: [...state.enemyDiscard, chosenCard],\n            enemyHand: state.enemyHand.filter(card => card.id !== chosenCard.id)\n          };\n        } else {\n          return { ...state,\n            env: [...state.env, chosenCard],\n            enemyHand: state.enemyHand.filter(card => card.id !== chosenCard.id)\n          };\n        }\n      } else {\n        let updatedEnemyHand = state.enemyHand.filter(card => card.id !== chosenCard.id);\n        let updatedEnemyRow = [...state.enemyField[chosenCard.role], chosenCard];\n        let updatedEnemyField = { ...state.enemyField,\n          [chosenCard.role]: updatedEnemyRow\n        };\n        let newEnemyTotal = newTotalScore(updatedEnemyField);\n        return { ...state,\n          enemyField: updatedEnemyField,\n          enemyHand: updatedEnemyHand,\n          enemyScore: newEnemyTotal\n        };\n      }\n\n      break;\n\n    case 'ENEMY_PASS':\n      return { ...state,\n        enemyPass: true,\n        userTurn: true\n      };\n      break;\n\n    case 'USER_PASS':\n      return { ...state,\n        userPass: true,\n        userTurn: false\n      };\n      break;\n\n    case 'ROUND_OVER':\n      if (state.userScore >= state.enemyScore) {\n        return { ...state,\n          enemyReactors: state.enemyReactors - 1\n        };\n      } else if (state.userScore < state.enemyScore) {\n        return { ...state,\n          userReactors: state.userReactors - 1\n        };\n      }\n\n      break;\n\n    case 'RESET_BOARD':\n      //This is super ugly but it works. We're setting the discard to everything in userField\n      //And then we're hardcoding in new clean fields\n      let newUserDiscard = Object.values(state.userField).splice(0).flat();\n      let newEnemyDiscard = Object.values(state.enemyField).splice(0).flat();\n      let cleanUserField = {\n        userField: {\n          space: [],\n          ground: [],\n          foot: [],\n          other: []\n        }\n      };\n      let cleanEnemyField = {\n        enemyField: {\n          space: [],\n          ground: [],\n          foot: [],\n          other: []\n        }\n      };\n      return { ...state,\n        userField: cleanUserField.userField,\n        enemyField: cleanEnemyField.enemyField,\n        env: [],\n        userPass: false,\n        enemyPass: false,\n        userDiscard: [...state.userDiscard, ...newUserDiscard],\n        enemyDiscard: [...state.enemyDiscard, ...newEnemyDiscard],\n        userScore: 0,\n        enemyScore: 0\n      };\n      break;\n\n    case 'GAME_OVER':\n      return { ...state,\n        userVictory: action.userVictory,\n        games: action.games,\n        userReactors: 2,\n        enemyReactors: 2,\n        gameOn: false,\n        userDiscard: [],\n        enemyDiscard: []\n      };\n      break;\n    // ABILITIES \n\n    case 'DEVELOP':\n      console.log('develop');\n      return { ...state\n      };\n      break;\n\n    case 'COLD':\n      //change a card's strength to 1 if it's in the field, in the foot row \n      let coldRow = state.userField.foot.map(card => {\n        if (card.id === action.card.id) {\n          card.strength = 1;\n        }\n\n        ;\n        return card;\n      });\n      let coldEnemyRow = state.enemyField.foot.map(card => {\n        if (card.id === action.card.id) {\n          card.strength = 1;\n        }\n\n        ;\n        return card;\n      });\n      let coldUserField = { ...state.userField,\n        foot: coldRow\n      };\n      let coldEnemyField = { ...state.enemyField,\n        foot: coldEnemyRow\n      };\n      return { ...state,\n        userField: coldUserField,\n        enemyField: coldEnemyField,\n        userScore: newTotalScore(coldUserField),\n        enemyScore: newTotalScore(coldEnemyField)\n      };\n      break;\n\n    case 'ROCKY':\n      let rockyRow = state.userField.ground.map(card => {\n        if (card.id === action.card.id) {\n          card.strength = 1;\n        }\n\n        ;\n        return card;\n      });\n      let rockyEnemyRow = state.enemyField.ground.map(card => {\n        if (card.id === action.card.id) {\n          card.strength = 1;\n        }\n\n        ;\n        return card;\n      });\n      let rockyUserField = { ...state.userField,\n        foot: rockyRow\n      };\n      let rockyEnemyField = { ...state.enemyField,\n        foot: rockyEnemyRow\n      };\n      return { ...state,\n        userField: rocky,\n        enemyField: coldEnemyField,\n        userScore: newTotalScore(coldUserField),\n        enemyScore: newTotalScore(coldEnemyField)\n      };\n\n    case 'FLARE':\n      console.log('flare');\n      return { ...state\n      };\n      break;\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/ben/flatiron/work/mod5/moon-gwent/frontend/src/store/reducers/index.js"],"names":["initialState","usernameInput","passwordInput","user","ownedCards","games","gameOn","drawHands","gameCards","enemyGameCards","hand","enemyHand","userDiscard","enemyDiscard","enemyField","space","ground","foot","other","userField","env","userScore","enemyScore","userTurn","userPass","enemyPass","userReactors","enemyReactors","userVictory","rowScore","array","score","i","length","strength","newTotalScore","field","total","Object","values","reduce","row","reducer","state","action","type","value","newHand","slice","newEnemyHand","newGameCards","filter","card","includes","newEnemyGameCards","role","updatedUserHand","id","updatedUserRow","updatedUserField","newUserTotal","conditions","map","ability","chosenCard","updatedEnemyHand","updatedEnemyRow","updatedEnemyField","newEnemyTotal","newUserDiscard","splice","flat","newEnemyDiscard","cleanUserField","cleanEnemyField","console","log","coldRow","coldEnemyRow","coldUserField","coldEnemyField","rockyRow","rockyEnemyRow","rockyUserField","rockyEnemyField","rocky"],"mappings":"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","sourcesContent":["export const initialState = {\n    //login\n    usernameInput: '',\n    passwordInput: '',\n    user: {},\n    ownedCards: [],\n    games: [],\n\n    //gameboard\n    gameOn: false,\n    drawHands: false,\n    gameCards: [],\n    enemyGameCards: [],\n    hand: [],\n    enemyHand: [],\n    userDiscard: [],\n    enemyDiscard: [],\n    enemyField: {\n        space: [],\n        ground: [],\n        foot: [],\n        other: []\n    },\n    userField: {\n        space: [],\n        ground: [],\n        foot: [],\n        other: []\n    },\n    env: [],\n\n    //scores \n    userScore: 0,\n    enemyScore: 0,\n\n    //passing\n    userTurn: true,\n    userPass: false,\n    enemyPass: false,\n\n    //reactors \n    userReactors: 2,\n    enemyReactors: 2,\n\n    userVictory: null\n}\n\nconst rowScore = (array) => {\n    let score = 0\n    for (let i = 0; i < array.length; i++) {\n        score += array[i].strength\n    }\n    return score\n}\n\nconst newTotalScore = (field) => {\n    //we iterate through the field values (rows), and get the total of each rowScore\n    let total = Object.values(field).reduce((total, row) => total + (rowScore(row)), 0)\n    return total\n}\n\n\nexport const reducer = (state, action) => {\n    switch (action.type) {\n\n        case 'CHANGE_USERNAME_INPUT':\n            return { ...state, usernameInput: action.value }\n            break;\n\n        case 'CHANGE_PASSWORD_INPUT':\n            return { ...state, passwordInput: action.value }\n            break;\n\n        case 'SET_USER':\n            return { ...state, user: action.user, ownedCards: action.ownedCards, games: action.games, gameOn: false }\n            break;\n\n        case 'SET_GAME_CARDS':\n            //TODO -> Gets sent a list of chosen cards to set as gameCards from the selection screen    \n            return { ...state, gameCards: action.gameCards, enemyGameCards: action.enemyGameCards, drawHands: true }\n            break;\n\n        case 'SET_HANDS':\n            //Separate from game cards because hand is drawn in the battlefield, not the selection screen\n\n            let newHand = state.gameCards.slice(0, 10)\n            let newEnemyHand = state.enemyGameCards.slice(0, 10)\n\n            let newGameCards = state.gameCards.filter(card => !(newHand.includes(card)))\n            let newEnemyGameCards = state.enemyGameCards.filter(card => !(newEnemyHand.includes(card)))\n            return {\n                ...state,\n                gameCards: newGameCards,\n                enemyGameCards: newEnemyGameCards,\n                hand: newHand,\n                enemyHand: newEnemyHand,\n                gameOn: true,\n                drawHands: false\n            }\n            break;\n\n        case 'PLAY_CARD':\n            //Possible change --> send over something to indicate whether it's the enemy or user \n            let role = action.role\n\n            //Remove the card from hand\n            let updatedUserHand = state.hand.filter(card => card.id !== action.card.id)\n\n            //Update the row, then update the field with that updated row \n            let updatedUserRow = [...state.userField[role], action.card]\n            let updatedUserField = { ...state.userField, [role]: updatedUserRow }\n\n            //Find the new total, including the added card\n            let newUserTotal = newTotalScore(updatedUserField)\n            return { ...state, userField: updatedUserField, hand: updatedUserHand, userScore: newUserTotal }\n            break;\n\n        case 'PLAY_ENV':\n\n            //check to see if env already has that condition\n            let conditions = state.env.map(card => card.ability)\n            if (conditions.includes(action.card.ability)) {\n                return {\n                    ...state,\n                    userDiscard: [...state.userDiscard, action.card],\n                    hand: state.hand.filter(card => card.id !== action.card.id)\n                }\n            }\n            else {\n                return {\n                    ...state,\n                    env: [...state.env, action.card],\n                    hand: state.hand.filter(card => card.id !== action.card.id)\n                }\n            }\n\n        case 'ENEMY_PLAY':\n            let chosenCard = state.enemyHand.slice(0, 1)[0]\n\n            if (chosenCard.role === 'env') {\n                let conditions = state.env.map(card => card.ability)\n                if (conditions.includes(chosenCard.ability)) {\n                    return {\n                        ...state,\n                        enemyDiscard: [...state.enemyDiscard, chosenCard],\n                        enemyHand: state.enemyHand.filter(card => card.id !== chosenCard.id)\n                    }\n                }\n                else {\n                    return {\n                        ...state,\n                        env: [...state.env, chosenCard],\n                        enemyHand: state.enemyHand.filter(card => card.id !== chosenCard.id)\n                    }\n                }\n            }\n            else {\n                let updatedEnemyHand = state.enemyHand.filter(card => card.id !== chosenCard.id)\n\n                let updatedEnemyRow = [...state.enemyField[chosenCard.role], chosenCard]\n                let updatedEnemyField = { ...state.enemyField, [chosenCard.role]: updatedEnemyRow }\n\n                let newEnemyTotal = newTotalScore(updatedEnemyField)\n                return { ...state, enemyField: updatedEnemyField, enemyHand: updatedEnemyHand, enemyScore: newEnemyTotal }\n            }\n            break;\n\n        case 'ENEMY_PASS':\n            return { ...state, enemyPass: true, userTurn: true }\n            break;\n\n        case 'USER_PASS':\n            return { ...state, userPass: true, userTurn: false }\n            break;\n\n        case 'ROUND_OVER':\n            if (state.userScore >= state.enemyScore) {\n                return { ...state, enemyReactors: (state.enemyReactors - 1) }\n            }\n            else if (state.userScore < state.enemyScore) {\n                return { ...state, userReactors: (state.userReactors - 1) }\n            }\n            break;\n\n        case 'RESET_BOARD':\n            //This is super ugly but it works. We're setting the discard to everything in userField\n            //And then we're hardcoding in new clean fields\n            let newUserDiscard = Object.values(state.userField).splice(0).flat();\n            let newEnemyDiscard = Object.values(state.enemyField).splice(0).flat();\n            let cleanUserField = {\n                userField: {\n                    space: [],\n                    ground: [],\n                    foot: [],\n                    other: []\n                }\n            }\n            let cleanEnemyField = {\n                enemyField: {\n                    space: [],\n                    ground: [],\n                    foot: [],\n                    other: []\n                }\n            }\n            return {\n                ...state,\n                userField: cleanUserField.userField,\n                enemyField: cleanEnemyField.enemyField,\n                env: [],\n                userPass: false,\n                enemyPass: false,\n                userDiscard: [...state.userDiscard, ...newUserDiscard],\n                enemyDiscard: [...state.enemyDiscard, ...newEnemyDiscard],\n                userScore: 0,\n                enemyScore: 0\n            }\n            break;\n\n        case 'GAME_OVER':\n            return {\n                ...state,\n                userVictory: action.userVictory,\n                games: action.games,\n                userReactors: 2,\n                enemyReactors: 2,\n                gameOn: false,\n                userDiscard: [],\n                enemyDiscard: []\n            }\n            break;\n\n        // ABILITIES \n\n        case 'DEVELOP':\n            console.log('develop')\n            return { ...state }\n            break;\n\n        case 'COLD':\n            //change a card's strength to 1 if it's in the field, in the foot row \n            let coldRow = state.userField.foot.map(card => {\n                if (card.id === action.card.id) {\n                    card.strength = 1\n                };\n                return card\n            })\n            let coldEnemyRow = state.enemyField.foot.map(card => {\n                if (card.id === action.card.id) {\n                    card.strength = 1\n                };\n                return card\n            })\n            let coldUserField = { ...state.userField, foot: coldRow }\n            let coldEnemyField = { ...state.enemyField, foot: coldEnemyRow }\n\n            return { ...state, userField: coldUserField, enemyField: coldEnemyField, userScore: newTotalScore(coldUserField), enemyScore: newTotalScore(coldEnemyField) }\n            break;\n\n        case 'ROCKY':\n\n            let rockyRow = state.userField.ground.map(card => {\n                if (card.id === action.card.id) {\n                    card.strength = 1\n                };\n                return card\n            })\n            let rockyEnemyRow = state.enemyField.ground.map(card => {\n                if (card.id === action.card.id) {\n                    card.strength = 1\n                };\n                return card\n            })\n            let rockyUserField = { ...state.userField, foot: rockyRow }\n            let rockyEnemyField = { ...state.enemyField, foot: rockyEnemyRow }\n\n            return { ...state, userField: rocky, enemyField: coldEnemyField, userScore: newTotalScore(coldUserField), enemyScore: newTotalScore(coldEnemyField) }\n\n        case 'FLARE':\n            console.log('flare')\n            return { ...state }\n            break;\n\n        default:\n            return state\n    }\n}"]},"metadata":{},"sourceType":"module"}